<mat-sidenav-container class="absolute left-0 right-0 bottom-0" style="top: 4.2rem">
    <mat-sidenav #sidenav mode="side" opened class="w-1/6 flex flex-col h-full border-r border-green-400" style="top:0.1rem">
        <h3 class="text-center text-gray-900" style="margin-top: 0.75rem">{{ "SETTINGS.administration" | translate }}</h3>
        <mat-divider class="border-green-400"></mat-divider>
        <mat-nav-list>
            <h3 mat-subheader>{{ 'GLOBAL.actions' | translate}}</h3>
            <a mat-list-item routerLink="/settings/general/roles//new">
                <mat-icon mat-list-icon class="fa fa-plus"></mat-icon>
                <p mat-line>
                    {{ 'ROLE.add' | translate }}
                </p>
            </a>
        </mat-nav-list>
        <mat-divider></mat-divider>
        <mat-nav-list>
            <mat-expansion-panel *ngFor="let parent of this.serviceSettings.getSettingsParent()"
                                 [expanded]="this.serviceSettings.getSelectedParentSetting() == parent['id']">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        {{ parent['label'] | translate }}
                    </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="w-full border-t-2 border-gray-600">
                    <div class="border-b border-gray-400 " *ngFor="let setting of this.serviceSettings.getSettings()[parent['id']];">
                        <button mat-button [class.text-green-400]="this.serviceSettings.getSelectedSetting() === setting['id']"
                                class="font-normal w-full h-20 flex justify-center items-center text-center"
                                (click)="this.serviceSettings.changeSetting(setting['id'], parent['id'])"
                                routerLink="{{ setting['route'] }}">
                            <i class="absolute left-4 w-10 h-10 rounded-full flex items-center justify-center fa-lg {{setting['icon']}}"> </i>
                            <p [class.font-medium]="this.serviceSettings.getSelectedSetting() === setting['id']" class="m-0">
                                {{ setting['label'] | translate }}
                            </p>
                        </button>
                    </div>
                </div>
            </mat-expansion-panel>
        </mat-nav-list>
    </mat-sidenav>
    <mat-sidenav-content class="bg-white">
        <div class="settings text-gray-900" style="margin-top: 0.75rem">
            <button mat-icon-button
                    (click)="sidenav.toggle(); this.serviceSettings.toggleMenu();" class="absolute left-2 top-2">
                <i [class.fa-arrow-right]="!this.serviceSettings.getIsMenuOpen()" class="fas fa-arrow-left text-2xl"></i>
            </button>
            <div class="settings_title text-center">
                <h3>{{ this.serviceSettings.getTitle() }}</h3>
                <hr class="border-green-400">
            </div>
        </div>
        <mat-accordion class="setting-custom-fields">
            <mat-expansion-panel [expanded]="true" (opened)="addCustomFieldsOpenState = true"
                                         (closed)="addCustomFieldsOpenState = false">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        {{ 'SETTINGS.add_custom_fields' | translate }}
                    </mat-panel-title>
                    <mat-panel-description>
                    </mat-panel-description>
                </mat-expansion-panel-header>
                  <form (ngSubmit)="AddCustomField()" [formGroup]="form">
                    <div [formGroup]="form" class="mx-8 grid grid-cols-6 gap-4">
                      <mat-form-field appearance="outline" class="w-full" *ngFor="let input of addFieldInputs">
                        <mat-label [attr.for]="input.label_short">{{ input.label }}</mat-label>
                        <div [ngSwitch]="input.controlType">
                            <input matInput *ngSwitchCase="'textbox'" [formControlName]="input.label_short"
                                [id]="input.label_short" [type]="input.type"/>
                            <mat-select [id]="input.label_short" *ngSwitchCase="'dropdown'" [formControlName]="input.label_short">
                            <mat-option  *ngFor="let opt of input.options" [value]="opt.key">
                                {{ opt.value }}
                            </mat-option>
                          </mat-select>
                        </div>
                      </mat-form-field>
                    </div>
                    <div class="grid h-20 justify-items-center">
                      <button mat-button class="mx-auto h-12 w-48 bg-gray-100" type="submit" [disabled]="!form.valid">
                          <i class="fa fa-plus fa-fw" aria-hidden="true"></i>{{ 'GLOBAL.add' | translate }}
                      </button>
                    </div>
                  </form>
            </mat-expansion-panel>
        </mat-accordion>
        <div class="custom-fields-control w-full">
            <div cdkDropListGroup class="w-max mx-auto">
                <div class="list-container">
                  <h2>{{ 'GLOBAL.inactive' | translate }}</h2>
                  <div
                      cdkDropList
                      [cdkDropListData]="inactiveFields"
                      class="custom-fields-list overflow-auto"
                      (cdkDropListDropped)="drop($event)">
                    <div class="custom-field-box" *ngFor="let item of inactiveFields; let i = index;" cdkDrag>
                        <div class="text-left">
                            {{item.label}}
                            <span class="text-gray-400">
                                ({{ 'GLOBAL.' + item.type | translate }} |
                                <i *ngIf="item.module == 'splitter'">{{ 'SPLITTER.splitter' | translate }})</i>
                                <i *ngIf="item.module == 'verifier'">{{ 'VERIFIER.verifier' | translate}})</i>
                            </span>
                        </div>
                        <button mat-button (click)="moveToActive(i)"><i class="fa fa-plus"></i></button>
                    </div>
                  </div>
                </div>
            <div class="list-container">
                <h2>{{ 'GLOBAL.active' | translate }}</h2>
                <div
                    cdkDropList
                    [cdkDropListData]="activeFields"
                    class="custom-fields-list overflow-auto"
                    (cdkDropListDropped)="drop($event)">
                <div class="custom-field-box" *ngFor="let item of activeFields; let i = index;"  cdkDrag>
                    <div class="text-left">
                        {{item.label}}
                        <span class="text-gray-400">
                            ({{ 'GLOBAL.' + item.type | translate }} |
                            <i *ngIf="item.module == 'splitter'">{{ 'SPLITTER.splitter' | translate }})</i>
                            <i *ngIf="item.module == 'verifier'">{{ 'VERIFIER.verifier' | translate}})</i>
                        </span>
                    </div>
                    <button mat-button (click)="moveToInactive(i)"><i class="fa fa-minus"></i></button>
                </div>
                </div>
            </div>
            </div>
        </div>
    </mat-sidenav-content>
</mat-sidenav-container>